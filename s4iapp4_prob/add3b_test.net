* C:\Ecole\S4\S4_APP4_Info\s4iapp4_prob\add3b_test.asc
XU1 o1 o2 o3 out Bin2Dec Vhigh={vv}
XU2 b N004 N005 N006 Dec2Bin Vhigh={vv}
XU3 a N001 N002 N003 Dec2Bin Vhigh={vv}
V1 vdd 0 1.8
Va a 0 3
Vb b 0 3
Vsel sel 0 1.8
XX1 vdd N001 N002 N003 N004 N005 N006 0 o1 o2 o3 cout 0 add3b

* block symbol definitions
.subckt add3b vdd a1 a2 a3 b1 b2 b3 vss o1 o2 o3 cout cin
XX1 a1 N001 vdd vss b1 xor params: XOR ll=180n wn={nnw} wp={nnw*mp}
XX2 N001 o1 vdd vss cin xor params: XOR ll=180n wn={nnw} wp={nnw*mp}
XX3 N001 N002 vdd vss cin nand params: NAND ll=180n wn={nnw} wp={nnw*mp}
XX4 a1 N007 vdd vss b1 nand params: NAND ll=180n wn={nnw} wp={nnw*mp}
XX5 N002 N003 vdd vss inv params: ll=180n wn={nnw} wp={nnw*mp}
XX6 N007 N006 vdd vss inv params: ll=180n wn={nnw} wp={nnw*mp}
XX7 N003 N004 vdd vss N006 nor params: NOR ll=180n wn={nnw} wp={nnw*mp}
XX8 N004 N005 vdd vss inv params: ll=180n wn={nnw} wp={nnw*mp}
XX9 a2 N008 vdd vss b2 xor params: XOR ll=180n wn={nnw} wp={nnw*mp}
XX10 N008 o2 vdd vss N005 xor params: XOR ll=180n wn={nnw} wp={nnw*mp}
XX11 N008 N009 vdd vss N005 nand params: NAND ll=180n wn={nnw} wp={nnw*mp}
XX12 a2 N014 vdd vss b2 nand params: NAND ll=180n wn={nnw} wp={nnw*mp}
XX13 N009 N010 vdd vss inv params: ll=180n wn={nnw} wp={nnw*mp}
XX14 N014 N013 vdd vss inv params: ll=180n wn={nnw} wp={nnw*mp}
XX15 N010 N011 vdd vss N013 nor params: NOR ll=180n wn={nnw} wp={nnw*mp}
XX16 N011 N012 vdd vss inv params: ll=180n wn={nnw} wp={nnw*mp}
XX17 a3 N015 vdd vss b3 xor params: XOR ll=180n wn={nnw} wp={nnw*mp}
XX18 N015 o3 vdd vss N012 xor params: XOR ll=180n wn={nnw} wp={nnw*mp}
XX19 N015 N016 vdd vss N012 nand params: NAND ll=180n wn={nnw} wp={nnw*mp}
XX20 a3 N020 vdd vss b3 nand params: NAND ll=180n wn={nnw} wp={nnw*mp}
XX21 N016 N017 vdd vss inv params: ll=180n wn={nnw} wp={nnw*mp}
XX22 N020 N019 vdd vss inv params: ll=180n wn={nnw} wp={nnw*mp}
XX23 N017 N018 vdd vss N019 nor params: NOR ll=180n wn={nnw} wp={nnw*mp}
XX24 N018 cout vdd vss inv params: ll=180n wn={nnw} wp={nnw*mp}
.ends add3b

.subckt xor in1 Q vdd vss in2
M1 Q in1 N003 N003 NMOS l={ll} w={wn2} ad={450n*{wn2}} as={450n*{wn2}} pd={900n+{wn2}} ps={1080n+{wn2}}
M2 N001 /in1 Q N001 PMOS l={ll} w={wp3} ad={450n*{wp3}} as={450n*{wp3}} pd={900n+{wp3}} ps={1080n+{wp3}}
M3 vdd in1 N002 vdd PMOS l={ll} w={wp3} ad={450n*{wp3}} as={450n*{wp3}} pd={900n+{wp3}} ps={1080n+{wp3}}
M4 vdd in2 N001 vdd PMOS l={ll} w={wp3} ad={450n*{wp3}} as={450n*{wp3}} pd={900n+{wp3}} ps={1080n+{wp3}}
M5 N002 /in2 Q N002 PMOS l={ll} w={wp3} ad={450n*{wp3}} as={450n*{wp3}} pd={900n+{wp3}} ps={1080n+{wp3}}
M6 N003 in2 vss vss NMOS l={ll} w={wn2} ad={450n*{wn2}} as={450n*{wn2}} pd={900n+{wn2}} ps={1080n+{wn2}}
M7 Q /in1 N004 N004 NMOS l={ll} w={wn_not_in} ad={450n*{wn_not_in}} as={450n*{wn_not_in}} pd={900n+{wn_not_in}} ps={1080n+{wn_not_in}}
M8 N004 /in2 vss vss NMOS l={ll} w={wn_not_in} ad={450n*{wn_not_in}} as={450n*{wn_not_in}} pd={900n+{wn_not_in}} ps={1080n+{wn_not_in}}
XX1 in1 /in1 vdd vss inv params: ll=180n wn={wn} wp={wp}
XX2 in2 /in2 vdd vss inv params: ll=180n wn={wn} wp={wp}
.lib BU_180nm.lib
.param wp3={wp*3} wn3={wn*3} wn2={wn*2.5} wp2={wp*3} wn_not_in={wn*3}
.ends xor

.subckt nand in1 Q vdd vss in2
M1 Q in1 N001 N001 NMOS l={ll} w={newWn} ad={450n*{newWn}} as={450n*{newWn}} pd={900n+{newWn}} ps={1080n+{newWn}}
M2 vdd in1 Q vdd PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M3 vdd in2 Q vdd PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M4 N001 in2 vss vss NMOS l={ll} w={newWn} ad={450n*{newWn}} as={450n*{newWn}} pd={900n+{newWn}} ps={1080n+{newWn}}
.lib BU_180nm.lib
.param newWn={wn*2}
.ends nand

.subckt inv In _Q vdd vss
M1 _Q In vss vss NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M2 vdd In _Q vdd PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
.lib BU_180nm.lib
.ends inv

.subckt nor in1 Q vdd vss in2
M1 Q in1 vss vss NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M2 Q in2 vss vss NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M3 vdd in1 N001 vdd PMOS l={ll} w={newWp} ad={450n*{newWp}} as={450n*{newWp}} pd={900n+{newWp}} ps={1080n+{newWp}}
M4 N001 in2 Q N001 PMOS l={ll} w={newWp} ad={450n*{newWp}} as={450n*{newWp}} pd={900n+{newWp}} ps={1080n+{newWp}}
.lib BU_180nm.lib
.param newWp={wp*2}
.ends nor

.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\ornit\Documents\LTspiceXVII\lib\cmp\standard.mos
.param vv=1.8 nnw=180n mp=2.26
.lib BU_180nm.lib
.op
.dc va 0 7 1
.lib Bin2Dec.sub
.lib Dec2Bin.sub
.backanno
.end
